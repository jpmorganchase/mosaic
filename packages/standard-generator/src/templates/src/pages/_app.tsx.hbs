// eslint-disable import/no-duplicates
import { AppProps } from 'next/app';
import {
  MosaicProvider,
  components as mosaicComponents
} from '@jpmorganchase/mosaic-site-components';
import { LayoutProvider } from '@jpmorganchase/mosaic-layouts';
import { layouts as mosaicLayouts } from '@jpmorganchase/mosaic-layouts';
import '@jpmorganchase/mosaic-site-preset-styles/dist/index.css';

{{{ printImports imports }}}
import { MyAppProps } from '../types/mosaic';

const components = mosaicComponents;
const layoutComponents = mosaicLayouts;

export default function MyApp({ Component, pageProps = {} }: AppProps<MyAppProps>) {
  const { session, sharedConfig, source: { frontmatter = {} } = {} } = pageProps;
  const storeProps = { sharedConfig, ...frontmatter };

  return (
    <MosaicProvider session={session} storeProps={storeProps}>
      <LayoutProvider layoutComponents={layoutComponents}>
        <Component components={components} {...pageProps} />
      </LayoutProvider>
    </MosaicProvider>
  );
}