// eslint-disable import/no-duplicates
import { AppProps } from 'next/app';
import { SessionProvider, MosaicProvider, BaseUrlProvider, Metadata, Image, Link } from '@jpmorganchase/mosaic-site-components';
import { ImageProvider, LinkProvider } from '@jpmorganchase/mosaic-components'
import Head from 'next/head';
{{{ printImports imports }}}

import { MyAppProps } from '../types/mosaic';

const components = {{{ printComponentIdentifiers imports }}};

export default function MyApp({ Component, pageProps = {} }: AppProps<MyAppProps>) {

  const { session, sharedConfig, source } = pageProps;

  const frontmatter = source?.frontmatter || {};
  const storeProps = { sharedConfig, ...frontmatter };

  return (
      <SessionProvider session={session}>
      <MosaicProvider storeProps={storeProps} >
        <Metadata Component={Head} />
          <BaseUrlProvider>
            <ImageProvider value={Image}>
              <LinkProvider value={Link}>
                  <Component components={components} {...pageProps} />
              </LinkProvider>
            </ImageProvider>
          </BaseUrlProvider>
      </MosaicProvider>
      </SessionProvider>
  );
}