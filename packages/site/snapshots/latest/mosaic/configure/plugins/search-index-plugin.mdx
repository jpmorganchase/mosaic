---
title: SearchIndexPlugin
layout: DetailOverview
lastModified: 1697636130675
fullPath: /mosaic/configure/plugins/search-index-plugin.mdx
route: /mosaic/configure/plugins/search-index-plugin
breadcrumbs:
  - label: Mosaic
    path: /mosaic/index
    id: /mosaic/index.mdx
  - label: Configure
    path: /mosaic/configure/index
    id: /mosaic/configure/index.mdx
  - label: Plugins
    path: /mosaic/configure/plugins/index
    id: /mosaic/configure/plugins/index.mdx
  - label: SearchIndexPlugin
    path: /mosaic/configure/plugins/search-index-plugin
    id: /mosaic/configure/plugins/search-index-plugin.mdx
readingTime:
  text: 2 min read
  minutes: 1.45
  time: 87000
  words: 290
tableOfContents:
  - depth: 3
    level: 1
    id: full-search-index
    text: Full Search Index
  - depth: 3
    level: 1
    id: condensed-search-data
    text: Condensed Search Data
  - depth: 3
    level: 1
    id: search-configuration
    text: Search Configuration
  - depth: 3
    level: 1
    id: search-relevancy-configuration
    text: Search relevancy configuration
  - depth: 2
    level: 0
    id: priority
    text: Priority
  - depth: 2
    level: 0
    id: options
    text: Options
  - depth: 2
    level: 0
    id: adding-to-mosaic
    text: Adding to Mosaic
navigation:
  prev:
    title: $RefPlugin
    route: /mosaic/configure/plugins/ref-plugin
  next:
    title: SharedConfigPlugin
    route: /mosaic/configure/plugins/shared-config-plugin
sidebarData:
  - id: /mosaic/configure/index
    fullPath: /mosaic/configure/index.mdx
    name: Configure
    priority: 4
    data:
      level: 2
      link: /mosaic/configure/index
    childNodes: []
  - id: /mosaic/configure/modes/index
    fullPath: /mosaic/configure/modes/index.mdx
    name: Modes of operation
    priority: 4
    data:
      level: 3
      link: /mosaic/configure/modes/index
    childNodes:
      - id: /mosaic/configure/modes/active
        fullPath: /mosaic/configure/modes/active.mdx
        name: Active mode
        data:
          level: 3
          link: /mosaic/configure/modes/active
        childNodes: []
      - id: /mosaic/configure/modes/snapshot-file
        fullPath: /mosaic/configure/modes/snapshot-file.mdx
        name: Snapshot file mode
        data:
          level: 3
          link: /mosaic/configure/modes/snapshot-file
        childNodes: []
      - id: /mosaic/configure/modes/snapshot-s3
        fullPath: /mosaic/configure/modes/snapshot-s3.mdx
        name: Snapshot AWS/S3 mode
        data:
          level: 3
          link: /mosaic/configure/modes/snapshot-s3
        childNodes: []
  - id: /mosaic/configure/theme/index
    fullPath: /mosaic/configure/theme/index.mdx
    name: Theming Your Site
    priority: 4
    data:
      level: 3
      link: /mosaic/configure/theme/index
    childNodes:
      - id: /mosaic/configure/theme/custom-css
        fullPath: /mosaic/configure/theme/custom-css.mdx
        name: Custom CSS
        priority: 3
        data:
          level: 3
          link: /mosaic/configure/theme/custom-css
        childNodes: []
      - id: /mosaic/configure/theme/custom-components
        fullPath: /mosaic/configure/theme/custom-components.mdx
        name: Custom Components
        priority: 2
        data:
          level: 3
          link: /mosaic/configure/theme/custom-components
        childNodes: []
  - id: /mosaic/configure/admin/index
    fullPath: /mosaic/configure/admin/index.mdx
    name: Admin
    priority: 3
    data:
      level: 3
      link: /mosaic/configure/admin/index
    childNodes: []
  - id: /mosaic/configure/sources/index
    fullPath: /mosaic/configure/sources/index.mdx
    name: Sources
    priority: 3
    data:
      level: 3
      link: /mosaic/configure/sources/index
    childNodes:
      - id: /mosaic/configure/sources/source-figma
        fullPath: /mosaic/configure/sources/source-figma.mdx
        name: Figma
        priority: 5
        data:
          level: 3
          link: /mosaic/configure/sources/source-figma
        childNodes: []
      - id: /mosaic/configure/sources/source-readme
        fullPath: /mosaic/configure/sources/source-readme.mdx
        name: Readme Files
        priority: 5
        data:
          level: 3
          link: /mosaic/configure/sources/source-readme
        childNodes: []
      - id: /mosaic/configure/sources/source-storybook
        fullPath: /mosaic/configure/sources/source-storybook.mdx
        name: Storybook
        priority: 5
        data:
          level: 3
          link: /mosaic/configure/sources/source-storybook
        childNodes: []
      - id: /mosaic/configure/sources/schedules
        fullPath: /mosaic/configure/sources/schedules.mdx
        name: Schedules
        priority: 4
        data:
          level: 3
          link: /mosaic/configure/sources/schedules
        childNodes: []
      - id: /mosaic/configure/sources/local-folder-source
        fullPath: /mosaic/configure/sources/local-folder-source.mdx
        name: Local Folder Source
        priority: 3
        data:
          level: 3
          link: /mosaic/configure/sources/local-folder-source
        childNodes: []
      - id: /mosaic/configure/sources/git-repo-source
        fullPath: /mosaic/configure/sources/git-repo-source.mdx
        name: Git Repo Source
        priority: 2
        data:
          level: 3
          link: /mosaic/configure/sources/git-repo-source
        childNodes: []
      - id: /mosaic/configure/sources/http-source
        fullPath: /mosaic/configure/sources/http-source.mdx
        name: HTTP Source
        priority: 1
        data:
          level: 3
          link: /mosaic/configure/sources/http-source
        childNodes: []
  - id: /mosaic/configure/layouts/index
    fullPath: /mosaic/configure/layouts/index.mdx
    name: Layouts
    priority: 2
    data:
      level: 3
      link: /mosaic/configure/layouts/index
    childNodes:
      - id: /mosaic/configure/layouts/detail-highlight
        fullPath: /mosaic/configure/layouts/detail-highlight.mdx
        name: Detail Highlight
        data:
          level: 3
          link: /mosaic/configure/layouts/detail-highlight
        childNodes: []
      - id: /mosaic/configure/layouts/detail-overview
        fullPath: /mosaic/configure/layouts/detail-overview.mdx
        name: Detail Overview
        data:
          level: 3
          link: /mosaic/configure/layouts/detail-overview
        childNodes: []
      - id: /mosaic/configure/layouts/detail-technical
        fullPath: /mosaic/configure/layouts/detail-technical.mdx
        name: Detail Technical
        data:
          level: 3
          link: /mosaic/configure/layouts/detail-technical
        childNodes: []
      - id: /mosaic/configure/layouts/landing
        fullPath: /mosaic/configure/layouts/landing.mdx
        name: Landing Layout
        data:
          level: 3
          link: /mosaic/configure/layouts/landing
        childNodes: []
      - id: /mosaic/configure/layouts/product-discover
        fullPath: /mosaic/configure/layouts/product-discover.mdx
        name: Product Discover Layout
        data:
          level: 3
          link: /mosaic/configure/layouts/product-discover
        childNodes: []
      - id: /mosaic/configure/layouts/product-preview
        fullPath: /mosaic/configure/layouts/product-preview.mdx
        name: Product Preview Layout
        data:
          level: 3
          link: /mosaic/configure/layouts/product-preview
        childNodes: []
  - id: /mosaic/configure/plugins/index
    fullPath: /mosaic/configure/plugins/index.mdx
    name: Plugins
    priority: 1
    data:
      level: 3
      link: /mosaic/configure/plugins/index
    childNodes:
      - id: /mosaic/configure/plugins/lifecycle/index
        fullPath: /mosaic/configure/plugins/lifecycle/index.mdx
        name: Lifecycle Events
        priority: 1
        data:
          level: 4
          link: /mosaic/configure/plugins/lifecycle/index
        childNodes:
          - id: /mosaic/configure/plugins/lifecycle/after-source
            fullPath: /mosaic/configure/plugins/lifecycle/after-source.mdx
            name: $afterSource
            priority: 5
            data:
              level: 4
              link: /mosaic/configure/plugins/lifecycle/after-source
            childNodes: []
          - id: /mosaic/configure/plugins/lifecycle/before-send
            fullPath: /mosaic/configure/plugins/lifecycle/before-send.mdx
            name: $beforeSend
            priority: 4
            data:
              level: 4
              link: /mosaic/configure/plugins/lifecycle/before-send
            childNodes: []
          - id: /mosaic/configure/plugins/lifecycle/after-update
            fullPath: /mosaic/configure/plugins/lifecycle/after-update.mdx
            name: afterUpdate
            priority: 3
            data:
              level: 4
              link: /mosaic/configure/plugins/lifecycle/after-update
            childNodes: []
          - id: /mosaic/configure/plugins/lifecycle/should-clear-cache
            fullPath: /mosaic/configure/plugins/lifecycle/should-clear-cache.mdx
            name: shouldClearCache
            priority: 2
            data:
              level: 4
              link: /mosaic/configure/plugins/lifecycle/should-clear-cache
            childNodes: []
          - id: >-
              /mosaic/configure/plugins/lifecycle/should-update-namespace-sources
            fullPath: >-
              /mosaic/configure/plugins/lifecycle/should-update-namespace-sources.mdx
            name: shouldUpdateNamespaceSources
            priority: 1
            data:
              level: 4
              link: >-
                /mosaic/configure/plugins/lifecycle/should-update-namespace-sources
            childNodes: []
      - id: /mosaic/configure/plugins/alias-plugin
        fullPath: /mosaic/configure/plugins/alias-plugin.mdx
        name: $AliasPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/alias-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/breadcrumbs-plugin
        fullPath: /mosaic/configure/plugins/breadcrumbs-plugin.mdx
        name: BreadcrumbsPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/breadcrumbs-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/broken-links-plugin
        fullPath: /mosaic/configure/plugins/broken-links-plugin.mdx
        name: BrokenLinksPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/broken-links-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/codemod-plugin
        fullPath: /mosaic/configure/plugins/codemod-plugin.mdx
        name: $CodeModPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/codemod-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/lazy-page-plugin
        fullPath: /mosaic/configure/plugins/lazy-page-plugin.mdx
        name: LazyPagePlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/lazy-page-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/pages-wthout-extensions-plugin
        fullPath: /mosaic/configure/plugins/pages-wthout-extensions-plugin.mdx
        name: PagesWithoutFileExtPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/pages-wthout-extensions-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/public-assets-plugin
        fullPath: /mosaic/configure/plugins/public-assets-plugin.mdx
        name: PublicAssetsPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/public-assets-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/reading-time-plugin
        fullPath: /mosaic/configure/plugins/reading-time-plugin.mdx
        name: ReadingTimePlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/reading-time-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/ref-plugin
        fullPath: /mosaic/configure/plugins/ref-plugin.mdx
        name: $RefPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/ref-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/search-index-plugin
        fullPath: /mosaic/configure/plugins/search-index-plugin.mdx
        name: SearchIndexPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/search-index-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/shared-config-plugin
        fullPath: /mosaic/configure/plugins/shared-config-plugin.mdx
        name: SharedConfigPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/shared-config-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/sidebar-plugin
        fullPath: /mosaic/configure/plugins/sidebar-plugin.mdx
        name: SidebarPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/sidebar-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/site-map-plugin
        fullPath: /mosaic/configure/plugins/site-map-plugin.mdx
        name: SiteMapPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/site-map-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/tag-plugin
        fullPath: /mosaic/configure/plugins/tag-plugin.mdx
        name: $TagPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/tag-plugin
        childNodes: []
      - id: /mosaic/configure/plugins/toc-plugin
        fullPath: /mosaic/configure/plugins/toc-plugin.mdx
        name: TableOfContentsPlugin
        data:
          level: 3
          link: /mosaic/configure/plugins/toc-plugin
        childNodes: []
---
# {meta.title}

The `SearchIndexPlugin` is responsible for generating the search index and configuration information for [Fuse.js](https://www.fusejs.io/) which is the matching engine powering the client-side search functionality of Mosaic sites.

It outputs 3 files:

*   Full Search Index - `search-data.json`
*   Condensed Search Index - `search-data-condensed.json`
*   Search Configuration - `search-config.json`

### Full Search Index

On a Mosaic site, the full index is fetched after a page has loaded, thus removing the chance of a huge index slowing down first-load.

Practically, the full index should load in the background before a user searches for something, but should a search be initiated before that (e.g., slow-internet) then the condensed version of the search index is available.

### Condensed Search Data

Search Index plugin creates a "condensed" version of the search index that only includes the `title` and `route` for each page. This is the "Minimum Viable Index" to provide somewhat useable search results client-side while the main search index is loaded in the background.

### Search Configuration

Any [options](https://www.fusejs.io/api/options.html) that need to be passed to Fuse.js.

### Search relevancy configuration

| Property         | Description                                           |
| ---------------- | ----------------------------------------------------- |
| includeScore     | https://www.fusejs.io/api/options.html#includescore   |
| includeMatches   | https://www.fusejs.io/api/options.html#includematches |
| maxPatternLength | TODO                                                  |
| ignoreLocation   | https://www.fusejs.io/api/options.html#ignorelocation |
| threshold        | https://www.fusejs.io/api/options.html#threshold      |
| keys             | https://www.fusejs.io/api/options.html#keys           |

## Priority

This plugin runs with no special priority.

## Options

| Property      | Description                                         |
| ------------- | --------------------------------------------------- |
| maxLineLength | TODO                                                |
| maxLineCount  | TODO                                                |
| keys          | https://www.fusejs.io/api/options.html#keys         |
| relevancy     | [search relevancy](#search-relevancy-configuration) |

## Adding to Mosaic

This plugin is included in the mosaic config shipped by the Mosaic standard generator. So if you use the below import in your `mosaic.config.mjs` file then the plugin is included already:

```js
import mosaicConfig from '@jpmorganchase/mosaic-standard-generator/dist/fs.config.js';
```

To add it yourself, add the following to the `plugins` collection:

```js
plugins: [
  {
    modulePath: '@jpmorganchase/mosaic-plugins/SearchIndexPlugin',
    previewDisabled: true,
    options: { maxLineLength: 240, maxLineCount: 240 }
  }
  // other plugins
];
```

<Callout variant="warning">
  It's usually a good idea to mark this plugin as disabled for preview sources otherwise the pages
  from the preview will appear in search results.
</Callout>
