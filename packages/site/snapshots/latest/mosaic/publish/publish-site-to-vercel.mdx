---
title: Publish a site to Vercel
layout: DetailTechnical
lastModified: 1679998244453
fullPath: /mosaic/publish/publish-site-to-vercel.mdx
route: /mosaic/publish/publish-site-to-vercel
breadcrumbs:
  - label: Mosaic
    path: /mosaic/index.mdx
    id: /mosaic/index.mdx
  - label: Publish
    path: /mosaic/publish/index.mdx
    id: /mosaic/publish/index.mdx
  - label: Publish a site to Vercel
    path: /mosaic/publish/publish-site-to-vercel.mdx
    id: /mosaic/publish/publish-site-to-vercel.mdx
readingTime:
  text: 1 min read
  minutes: 0.99
  time: 59400
  words: 198
tableOfContents:
  - level: 1
    id: publish-a-site-to-vercel
    text: Publish a site to Vercel
  - level: 2
    id: deployment
    text: Deployment
  - level: 3
    id: 1-update-config-file
    text: 1. Update Config File
  - level: 3
    id: 2-set-environment-variables
    text: 2. Set Environment Variables
  - level: 3
    id: 3-run-build-and-deploy
    text: 3. Run Build and Deploy
  - level: 2
    id: output-file-tracing
    text: Output File Tracing
navigation:
  prev:
    title: Publish a site to AWS
    route: /mosaic/publish/publish-site-to-aws
sidebarData:
  - id: /mosaic/index
    fullPath: /mosaic/index.mdx
    name: Mosaic
    data:
      level: 1
      link: /mosaic/index
    childNodes:
      - id: /mosaic/quick-start/index
        fullPath: /mosaic/quick-start/index.mdx
        name: Quick start guides
        priority: 5
        data:
          level: 2
          link: /mosaic/quick-start/index
        childNodes:
          - id: /mosaic/quick-start/publish-site-to-aws
            fullPath: /mosaic/quick-start/publish-site-to-aws.mdx
            name: Publish a site to AWS
            data:
              level: 2
              link: /mosaic/quick-start/publish-site-to-aws
            childNodes: []
      - id: /mosaic/configure/index
        fullPath: /mosaic/configure/index.mdx
        name: Configure
        priority: 4
        data:
          level: 2
          link: /mosaic/configure/index
        childNodes:
          - id: /mosaic/configure/modes/index
            fullPath: /mosaic/configure/modes/index.mdx
            name: Modes of operation
            priority: 4
            data:
              level: 3
              link: /mosaic/configure/modes/index
            childNodes:
              - id: /mosaic/configure/modes/active
                fullPath: /mosaic/configure/modes/active.mdx
                name: Active mode
                data:
                  level: 3
                  link: /mosaic/configure/modes/active
                childNodes: []
              - id: /mosaic/configure/modes/snapshot-file
                fullPath: /mosaic/configure/modes/snapshot-file.mdx
                name: Snapshot file mode
                data:
                  level: 3
                  link: /mosaic/configure/modes/snapshot-file
                childNodes: []
              - id: /mosaic/configure/modes/snapshot-s3
                fullPath: /mosaic/configure/modes/snapshot-s3.mdx
                name: Snapshot AWS/S3 mode
                data:
                  level: 3
                  link: /mosaic/configure/modes/snapshot-s3
                childNodes: []
          - id: /mosaic/configure/sources/index
            fullPath: /mosaic/configure/sources/index.mdx
            name: Sources
            priority: 3
            data:
              level: 3
              link: /mosaic/configure/sources/index
            childNodes:
              - id: /mosaic/configure/sources/local-folder-source
                fullPath: /mosaic/configure/sources/local-folder-source.mdx
                name: Local Folder Source
                priority: 3
                data:
                  level: 3
                  link: /mosaic/configure/sources/local-folder-source
                childNodes: []
              - id: /mosaic/configure/sources/git-repo-source
                fullPath: /mosaic/configure/sources/git-repo-source.mdx
                name: Git Repo Source
                priority: 2
                data:
                  level: 3
                  link: /mosaic/configure/sources/git-repo-source
                childNodes: []
              - id: /mosaic/configure/sources/http-source
                fullPath: /mosaic/configure/sources/http-source.mdx
                name: HTTP Source
                priority: 1
                data:
                  level: 3
                  link: /mosaic/configure/sources/http-source
                childNodes: []
          - id: /mosaic/configure/layouts/index
            fullPath: /mosaic/configure/layouts/index.mdx
            name: Layouts
            priority: 2
            data:
              level: 3
              link: /mosaic/configure/layouts/index
            childNodes: []
          - id: /mosaic/configure/plugins/index
            fullPath: /mosaic/configure/plugins/index.mdx
            name: Plugins
            priority: 1
            data:
              level: 3
              link: /mosaic/configure/plugins/index
            childNodes:
              - id: /mosaic/configure/plugins/after-source
                fullPath: /mosaic/configure/plugins/after-source.mdx
                name: Lifecycle - $afterSource
                data:
                  level: 3
                  link: /mosaic/configure/plugins/after-source
                childNodes: []
              - id: /mosaic/configure/plugins/after-update
                fullPath: /mosaic/configure/plugins/after-update.mdx
                name: Lifecycle - afterUpdate
                data:
                  level: 3
                  link: /mosaic/configure/plugins/after-update
                childNodes: []
              - id: /mosaic/configure/plugins/before-send
                fullPath: /mosaic/configure/plugins/before-send.mdx
                name: Lifecycle - $beforeSend
                data:
                  level: 3
                  link: /mosaic/configure/plugins/before-send
                childNodes: []
              - id: /mosaic/configure/plugins/should-clear-cache
                fullPath: /mosaic/configure/plugins/should-clear-cache.mdx
                name: Lifecycle - shouldClearCache
                data:
                  level: 3
                  link: /mosaic/configure/plugins/should-clear-cache
                childNodes: []
      - id: /mosaic/author/index
        fullPath: /mosaic/author/index.mdx
        name: Author
        priority: 3
        data:
          level: 2
          link: /mosaic/author/index
        childNodes:
          - id: /mosaic/author/frontmatter
            fullPath: /mosaic/author/frontmatter.mdx
            name: Frontmatter
            priority: 4
            data:
              level: 2
              link: /mosaic/author/frontmatter
            childNodes: []
          - id: /mosaic/author/markdown-syntax
            fullPath: /mosaic/author/markdown-syntax.mdx
            name: Markdown Syntax
            priority: 3
            data:
              level: 2
              link: /mosaic/author/markdown-syntax
            childNodes: []
          - id: /mosaic/author/ui-components
            fullPath: /mosaic/author/ui-components.mdx
            name: UI Components
            priority: 2
            data:
              level: 2
              link: /mosaic/author/ui-components
            childNodes: []
          - id: /mosaic/author/page-templates
            fullPath: /mosaic/author/page-templates.mdx
            name: Page Templates
            priority: 1
            data:
              level: 2
              link: /mosaic/author/page-templates
            childNodes: []
      - id: /mosaic/publish/index
        fullPath: /mosaic/publish/index.mdx
        name: Publish
        priority: 2
        data:
          level: 2
          link: /mosaic/publish/index
        childNodes:
          - id: /mosaic/publish/publish-site-to-aws
            fullPath: /mosaic/publish/publish-site-to-aws.mdx
            name: Publish a site to AWS
            data:
              level: 2
              link: /mosaic/publish/publish-site-to-aws
            childNodes: []
          - id: /mosaic/publish/publish-site-to-vercel
            fullPath: /mosaic/publish/publish-site-to-vercel.mdx
            name: Publish a site to Vercel
            data:
              level: 2
              link: /mosaic/publish/publish-site-to-vercel
            childNodes: []
---

# {meta.title}

A Mosaic site is a [Next.Js](https://nextjs.org/) app.

To publish a Next.Js App to Vercel, refer to the [Vercel docs](https://nextjs.org/learn/basics/deploying-nextjs-app/deploy).

## Deployment

As the [vercel platform](https://vercel.com/) hosts static content you will need to deploy a mosaic snapshot. There is no option to run mosaic in [active mode](../configure/modes/active).

### 1. Update Config File

Add the following to the mosaic config file used by your site:

```
 deployment: { mode: 'snapshot-file', platform: 'vercel' }
```

### 2. Set Environment Variables

Set 2 [environment variables](https://vercel.com/docs/concepts/deployments/environments#environment-variables) in the vercel dashboard.

| Variable Name       | Value             |
| ------------------- | ----------------- |
| MOSAIC_MODE         | snapshot-file     |
| MOSAIC_SNAPSHOT_DIR | snapshots/latest. |

### 3. Run Build and Deploy

The `build` command used by vercel must run `yarn build` followed by `yarn deploy`

The `deploy` command is needed to workaround an [output file tracing](#output-file-tracing) problem.

Example:

```
yarn build && yarn deploy
```

## Output File Tracing

[Output File Tracing](https://nextjs.org/docs/advanced-features/output-file-tracing) is a feature of Next.js that uses static analysis
to determine what files are needed to deploy a production version of an application.

Due to the architecture of mosaic, snapshot files can be ignored by this process and therefore excluded from the build artifacts deployed by vercel.

If you are deploying your site to the [vercel platform](https://vercel.com/) then the mosaic site has a `deploy` command that will update the nextjs output trace to include the snapshot files.
