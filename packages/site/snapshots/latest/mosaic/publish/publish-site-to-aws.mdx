---
title: Publish a site to AWS
layout: DetailTechnical
lastModified: 1679920843785
fullPath: /mosaic/publish/publish-site-to-aws.mdx
route: /mosaic/publish/publish-site-to-aws
breadcrumbs:
  - label: Mosaic
    path: /mosaic/index.mdx
    id: /mosaic/index.mdx
  - label: Getting started
    path: /mosaic/publish/index.mdx
    id: /mosaic/publish/index.mdx
  - label: Publish a site to AWS
    path: /mosaic/publish/publish-site-to-aws.mdx
    id: /mosaic/publish/publish-site-to-aws.mdx
readingTime:
  text: 1 min read
  minutes: 0.52
  time: 31200
  words: 104
tableOfContents:
  - level: 1
    id: publish-a-site-to-aws
    text: Publish a site to AWS
navigation:
  prev:
    title: Getting started
    route: /mosaic/publish/index
  next:
    title: Publish a site to Vercel
    route: /mosaic/publish/publish-site-to-vercel
sidebarData:
  - id: /mosaic/index
    fullPath: /mosaic/index.mdx
    name: Mosaic
    data:
      level: 1
      link: /mosaic/index
    childNodes:
      - id: /mosaic/author/index
        fullPath: /mosaic/author/index.mdx
        name: Author
        data:
          level: 2
          link: /mosaic/author/index
        childNodes: []
      - id: /mosaic/configure/index
        fullPath: /mosaic/configure/index.mdx
        name: Configure
        data:
          level: 2
          link: /mosaic/configure/index
        childNodes:
          - id: /mosaic/configure/modes/index
            fullPath: /mosaic/configure/modes/index.mdx
            name: Modes of operation
            data:
              level: 3
              link: /mosaic/configure/modes/index
            childNodes:
              - id: /mosaic/configure/modes/active
                fullPath: /mosaic/configure/modes/active.mdx
                name: Active mode
                data:
                  level: 3
                  link: /mosaic/configure/modes/active
                childNodes: []
              - id: /mosaic/configure/modes/snapshot-file
                fullPath: /mosaic/configure/modes/snapshot-file.mdx
                name: Snapshot file mode
                data:
                  level: 3
                  link: /mosaic/configure/modes/snapshot-file
                childNodes: []
              - id: /mosaic/configure/modes/snapshot-s3
                fullPath: /mosaic/configure/modes/snapshot-s3.mdx
                name: Snapshot AWS/S3 mode
                data:
                  level: 3
                  link: /mosaic/configure/modes/snapshot-s3
                childNodes: []
          - id: /mosaic/configure/plugins/index
            fullPath: /mosaic/configure/plugins/index.mdx
            name: Plugins
            data:
              level: 3
              link: /mosaic/configure/plugins/index
            childNodes:
              - id: /mosaic/configure/plugins/after-source
                fullPath: /mosaic/configure/plugins/after-source.mdx
                name: Lifecycle - $afterSource
                data:
                  level: 3
                  link: /mosaic/configure/plugins/after-source
                childNodes: []
              - id: /mosaic/configure/plugins/after-update
                fullPath: /mosaic/configure/plugins/after-update.mdx
                name: Lifecycle - afterUpdate
                data:
                  level: 3
                  link: /mosaic/configure/plugins/after-update
                childNodes: []
              - id: /mosaic/configure/plugins/before-send
                fullPath: /mosaic/configure/plugins/before-send.mdx
                name: Lifecycle - $beforeSend
                data:
                  level: 3
                  link: /mosaic/configure/plugins/before-send
                childNodes: []
              - id: /mosaic/configure/plugins/should-clear-cache
                fullPath: /mosaic/configure/plugins/should-clear-cache.mdx
                name: Lifecycle - shouldClearCache
                data:
                  level: 3
                  link: /mosaic/configure/plugins/should-clear-cache
                childNodes: []
          - id: /mosaic/configure/sources/index
            fullPath: /mosaic/configure/sources/index.mdx
            name: Sources
            data:
              level: 3
              link: /mosaic/configure/sources/index
            childNodes:
              - id: /mosaic/configure/sources/http-source
                fullPath: /mosaic/configure/sources/http-source.mdx
                name: HTTP Source
                priority: 3
                data:
                  level: 3
                  link: /mosaic/configure/sources/http-source
                childNodes: []
              - id: /mosaic/configure/sources/git-repo-source
                fullPath: /mosaic/configure/sources/git-repo-source.mdx
                name: Git Repo Source
                priority: 2
                data:
                  level: 3
                  link: /mosaic/configure/sources/git-repo-source
                childNodes: []
              - id: /mosaic/configure/sources/local-folder-source
                fullPath: /mosaic/configure/sources/local-folder-source.mdx
                name: Local Folder Source
                priority: 1
                data:
                  level: 3
                  link: /mosaic/configure/sources/local-folder-source
                childNodes: []
      - id: /mosaic/publish/index
        fullPath: /mosaic/publish/index.mdx
        name: Getting started
        data:
          level: 2
          link: /mosaic/publish/index
        childNodes:
          - id: /mosaic/publish/publish-site-to-aws
            fullPath: /mosaic/publish/publish-site-to-aws.mdx
            name: Publish a site to AWS
            data:
              level: 2
              link: /mosaic/publish/publish-site-to-aws
            childNodes: []
          - id: /mosaic/publish/publish-site-to-vercel
            fullPath: /mosaic/publish/publish-site-to-vercel.mdx
            name: Publish a site to Vercel
            data:
              level: 2
              link: /mosaic/publish/publish-site-to-vercel
            childNodes: []
      - id: /mosaic/quick-start/index
        fullPath: /mosaic/quick-start/index.mdx
        name: Quick start guides
        data:
          level: 2
          link: /mosaic/quick-start/index
        childNodes:
          - id: /mosaic/quick-start/publish-site-to-aws
            fullPath: /mosaic/quick-start/publish-site-to-aws.mdx
            name: Publish a site to AWS
            data:
              level: 2
              link: /mosaic/quick-start/publish-site-to-aws
            childNodes: []
---

# {meta.title}

A Mosaic site is a [Next.Js](https://nextjs.org/) app.

To publish a Next.Js App to AWS, deploy your app as a SSR application by following the [AWS docs](https://docs.amplify.aws/guides/hosting/nextjs/q/platform/js/).

Once the basic app has been configured, add the Mosaic specifics.

Add the environment vars to the hosted app via the Amplify console

```
MOSAIC_MODE="snapshot-s3"
MOSAIC_S3_BUCKET="<your S3 bucket id>"
MOSAIC_S3_REGION="<your S3 region>"
MOSAIC_S3_ACCESS_KEY_ID=""<your S3 access key>"
MOSAIC_S3_SECRET_ACCESS_KEY="<your S3 secret access key>"
```

Add the following build settings

```
version: 1
frontend:
  phases:
    preBuild:
      commands:
        - yarn install
        - env | grep -e MOSAIC >> .env.production
    build:
      commands:
        - yarn run build
  artifacts:
    baseDirectory: .next
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
```

Ensure the Node is set to 16
