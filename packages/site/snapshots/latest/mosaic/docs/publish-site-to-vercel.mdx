---
title: Publish a site to Vercel
layout: DetailTechnical
lastModified: 1679402262503
fullPath: /mosaic/docs/publish-site-to-vercel.mdx
route: /mosaic/docs/publish-site-to-vercel
breadcrumbs:
  - label: Mosaic
    path: /mosaic/index.mdx
    id: /mosaic/index.mdx
  - label: Getting started
    path: /mosaic/docs/index.mdx
    id: /mosaic/docs/index.mdx
  - label: Publish a site to Vercel
    path: /mosaic/docs/publish-site-to-vercel.mdx
    id: /mosaic/docs/publish-site-to-vercel.mdx
readingTime:
  text: 1 min read
  minutes: 0.99
  time: 59400
  words: 198
tableOfContents:
  - level: 1
    id: publish-a-site-to-vercel
    text: Publish a site to Vercel
  - level: 2
    id: deployment
    text: Deployment
  - level: 3
    id: 1-update-config-file
    text: 1. Update Config File
  - level: 3
    id: 2-set-environment-variables
    text: 2. Set Environment Variables
  - level: 3
    id: 3-run-build-and-deploy
    text: 3. Run Build and Deploy
  - level: 2
    id: output-file-tracing
    text: Output File Tracing
navigation:
  prev:
    title: Publish a site to AWS
    route: /mosaic/docs/publish-site-to-aws
  next:
    title: Modes of operation
    route: /mosaic/docs/modes/index
sidebarData:
  - id: /mosaic/index
    fullPath: /mosaic/index.mdx
    name: Mosaic
    data:
      level: 1
      link: /mosaic/index
    childNodes:
      - id: /mosaic/docs/index
        fullPath: /mosaic/docs/index.mdx
        name: Getting started
        data:
          level: 2
          link: /mosaic/docs/index
        childNodes:
          - id: /mosaic/docs/publish-site-to-aws
            fullPath: /mosaic/docs/publish-site-to-aws.mdx
            name: Publish a site to AWS
            data:
              level: 2
              link: /mosaic/docs/publish-site-to-aws
            childNodes: []
          - id: /mosaic/docs/publish-site-to-vercel
            fullPath: /mosaic/docs/publish-site-to-vercel.mdx
            name: Publish a site to Vercel
            data:
              level: 2
              link: /mosaic/docs/publish-site-to-vercel
            childNodes: []
          - id: /mosaic/docs/modes/index
            fullPath: /mosaic/docs/modes/index.mdx
            name: Modes of operation
            data:
              level: 3
              link: /mosaic/docs/modes/index
            childNodes:
              - id: /mosaic/docs/modes/active
                fullPath: /mosaic/docs/modes/active.mdx
                name: Active mode
                data:
                  level: 3
                  link: /mosaic/docs/modes/active
                childNodes: []
              - id: /mosaic/docs/modes/snapshot-file
                fullPath: /mosaic/docs/modes/snapshot-file.mdx
                name: Snapshot file mode
                data:
                  level: 3
                  link: /mosaic/docs/modes/snapshot-file
                childNodes: []
              - id: /mosaic/docs/modes/snapshot-s3
                fullPath: /mosaic/docs/modes/snapshot-s3.mdx
                name: Snapshot AWS/S3 mode
                data:
                  level: 3
                  link: /mosaic/docs/modes/snapshot-s3
                childNodes: []
      - id: /mosaic/quick-start/index
        fullPath: /mosaic/quick-start/index.mdx
        name: Quick start guides
        data:
          level: 2
          link: /mosaic/quick-start/index
        childNodes:
          - id: /mosaic/quick-start/publish-site-to-aws
            fullPath: /mosaic/quick-start/publish-site-to-aws.mdx
            name: Publish a site to AWS
            data:
              level: 2
              link: /mosaic/quick-start/publish-site-to-aws
            childNodes: []
---

# {meta.title}

A Mosaic site is a [Next.Js](https://nextjs.org/) app.

To publish a Next.Js App to Vercel, refer to the [Vercel docs](https://nextjs.org/learn/basics/deploying-nextjs-app/deploy).

## Deployment

As the [vercel platform](https://vercel.com/) hosts static content you will need to deploy a mosaic snapshot. There is no option to run mosaic in [active mode](./modes/active).

### 1. Update Config File

Add the following to the mosaic config file used by your site:

```
 deployment: { mode: 'snapshot-file', platform: 'vercel' }
```

### 2. Set Environment Variables

Set 2 [environment variables](https://vercel.com/docs/concepts/deployments/environments#environment-variables) in the vercel dashboard.

| Variable Name       | Value             |
| ------------------- | ----------------- |
| MOSAIC_MODE         | snapshot-file     |
| MOSAIC_SNAPSHOT_DIR | snapshots/latest. |

### 3. Run Build and Deploy

The `build` command used by vercel must run `yarn build` followed by `yarn deploy`

The `deploy` command is needed to workaround an [output file tracing](#output-file-tracing) problem.

Example:

```
yarn build && yarn deploy
```

## Output File Tracing

[Output File Tracing](https://nextjs.org/docs/advanced-features/output-file-tracing) is a feature of Next.js that uses static analysis
to determine what files are needed to deploy a production version of an application.

Due to the architecture of mosaic, snapshot files can be ignored by this process and therefore excluded from the build artifacts deployed by vercel.

If you are deploying your site to the [vercel platform](https://vercel.com/) then the mosaic site has a `deploy` command that will update the nextjs output trace to include the snapshot files.
