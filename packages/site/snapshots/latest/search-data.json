[{"title":"Mosaic","content":["True to its name, Mosaic brings together several concepts—including content, design and technical infrastructure—to deliver a unified website experience that is truly greater than the sum of its individual parts.","With Mosaic, you can:","Don't move your content where it does not belong. Compose content from remote data sources which\nare pulled at runtime by our content aggregator.","Visualize your content with your own theme, layouts and components or use the Mosaic Design\nlanguage.","Extend the existing code and add your own content source types through our simple plugin\narchitecture.","Publish your content through Server Side Rendering (SSR) or generate a snapshot of your content\nand serve it as a Statically Generated Site (SGS).","Creating a website has never been so easy!"],"route":"/mosaic/index"},{"title":"Getting started","content":["Create your first site","To create your first Mosaic site, we have created a command line generator that scaffolds a ","standard"," site.","A ","standard"," site offers","an out the box, working site, which showcases local and remote content sources","a minimal set of files that can be configured with your own components, themes, layouts, sources and plugins","an update path that enables you to update Mosaic, independently of your own configuration","Let's get started:","Install the Mosaic create site script.","> yarn global add @jpmorganchase/mosaic-create-site","Create a directory for your site and run the "," script.","> mkdir mosaic-sample-site\n> cd mosaic-sample-site\n> mosaic-create-site -f .","Define the environment variable, which enables us to access your remote repo.","> export MOSAIC_DOCS_CLONE_CREDENTIALS=\"<your GIT username:PAT Token>\"","The "," environment variable is composed of your git username and your PAT token.\nFollow these ","docs"," to see how to create your own PAT token.","Your site is ready to run.","> yarn serve","In your browser load ","Congratulations, you have created your first Mosaic site."],"route":"/mosaic/docs/index"},{"title":"Publish a site to AWS","content":["A Mosaic site is a ","Next.Js"," app.","To publish a Next.Js App to AWS, deploy your app as a SSR application by following the ","AWS docs",".","Once the basic app has been configured, add the Mosaic specifics.","Add the environment vars to the hosted app via the Amplify console","MOSAIC_MODE=\"snapshot-s3\"\nMOSAIC_S3_BUCKET=\"<your S3 bucket id>\"\nMOSAIC_S3_REGION=\"<your S3 region>\"\nMOSAIC_S3_ACCESS_KEY_ID=\"\"<your S3 access key>\"\nMOSAIC_S3_SECRET_ACCESS_KEY=\"<your S3 secret access key>\"","Add the following build settings","version: 1\nfrontend:\n  phases:\n    preBuild:\n      commands:\n        - yarn install\n        - env | grep -e MOSAIC >> .env.production\n    build:\n      commands:\n        - yarn run build\n  artifacts:\n    baseDirectory: .next\n    files:\n     ","Ensure the Node is set to 16"],"route":"/mosaic/docs/publish-site-to-aws"},{"title":"Publish a site to Vercel","content":["A Mosaic site is a ","Next.Js"," app.","To publish a Next.Js App to Vercel, refer to the ","Vercel docs","."],"route":"/mosaic/docs/publish-site-to-vercel"},{"title":"Quick start guides","content":["In a hurry?","Browse the Mosaic quick start guides."],"route":"/mosaic/quick-start/index"},{"title":"Publish a site to AWS","content":["Publish a site to AWS using S3 snapshots.","Step 1: Generate a Mosaic site","> yarn global add @jpmorganchase/mosaic-create-site\n> mosaic-create-site create -o my-sample-site\n> cd my-sample-site","Step 2: Create the Github repository","> git init\n> git remote add origin git@github.com:username/my-sample-site.git\n> git add .\n> git commit -m \"initial commit\"\n> git push origin main","Step 3: Generate a snapshot of content","> yarn gen:snapshot","Step 4: Configure environment for S3","> export MOSAIC_MODE=\"snapshot-s3\"\n> export MOSAIC_S3_BUCKET=\"<your S3 bucket id>\"\n> export MOSAIC_S3_REGION=\"<your S3 region>\"\n> export MOSAIC_S3_ACCESS_KEY_ID=\"\"<your S3 access key>\"\n> export MOSAIC_S3_SECRET_ACCESS_KEY=\"<your S3 secret>\"","Step 5: Setup AWS","Switch to the ","AWS Amplify"," console and deploy your app as a SSR application by following the ","AWS docs",".","Setup an S3 bucket as per the ","AWS S3 docs",".","Step 7: Configure Your AWS App","Add the environment vars to the hosted app via your console","MOSAIC_MODE=\"snapshot-s3\"\nMOSAIC_S3_BUCKET=\"<your S3 bucket id>\"\nMOSAIC_S3_REGION=\"<your S3 region>\"\nMOSAIC_S3_ACCESS_KEY_ID=\"\"<your S3 access key>\"\nMOSAIC_S3_SECRET_ACCESS_KEY=\"<your S3 secret access key>\"","Add the following build settings","version: 1\nfrontend:\n  phases:\n    preBuild:\n      commands:\n        - yarn install\n        - env | grep -e MOSAIC >> .env.production\n    build:\n      commands:\n        - yarn run build\n  artifacts:\n    baseDirectory: .next\n    files:\n     ","Ensure the Node is set to 16","Step 8: Upload your snapshot","Upload your snapshot to S3 storage.","> yarn mosaic upload -S ./snapshots/latest"],"route":"/mosaic/quick-start/publish-site-to-aws"},{"title":"Active mode","content":["Active Mode","In "," mode content can be ","pulled"," from heterogeneous data sources and normalized via plugins, to the configured components/theme.\nAs your content changes, the site will ","re-pull"," the content and update your site in real-time.","The standard generated site comes with 2 sources to demonstrate, how 'active' mode work.","a local source, which loads content from ","a remote source, which loads content from a ","sample Github repository","Configuring Your Content Sources","All content is composed together within a ","namespace",".","A ","namespace"," is the scope for aggregated content, represented by the root path.\ne.g Our sample docs are aggregated into a ","namespace"," called "," and served by the user journey ","Mosaic doc sources are defined by a file called ","Here is how that might look for a standard site.","Pull Your Local Content","To tryout local content creation, add a file called","The load ","Each directory should contain an "," which is the default page, when a page is loaded without a path","Now create other pages and subdirectories and explore how Mosaic, builds your user-journeys from your fileset.","Pull Your Remote Content","To tryout remote content creation, your standard site comes pre-configured to load our Mosaic sample docs.","Edit the "," and change your "," and "," to pull content from other repos."],"route":"/mosaic/docs/modes/active"},{"title":"Modes of operation","content":["Mosaic can operate in 3 different modes","Active updates","In ","active"," mode, content updates in real-time.","active"," mode content is pulled at configured intervals in real-time, as defined by ",".","Read the ","active"," configuration docs.","Static content","Consider a snapshot as a directory of static content previously pulled from your content sources, which does not update itself.","In a snapshot mode, the snapshot does update itself.","File based snapshots","In "," mode, immutable snapshots of content are loaded at startup from the local file-system.","Read the ","snapshot-file"," configuration docs.","S3 based snapshots","In "," mode, snapshots of content are loaded at startup from a remote S3 bucket.","Read the ","snapshot-s3"," configuration docs."],"route":"/mosaic/docs/modes/index"},{"title":"Snapshot file mode","content":["In "," mode a local immutable snapshot can be loaded by the site. Typically, the snapshot and the site are\ndeployed together and upon startup the site can load the snapshot from the local file-system.","To use "," mode","export MOSAIC_MODE=\"snapshot-file\"\nexport MOSAIC_SNAPSHOT_DIR=\"./snapshot/latest\"","Generating snapshot","To generate a snapshot, run","yarn gen:snapshot","Commit the snapshot to your Git repo and push the site+snapshot to your Git repo, within the same branch."],"route":"/mosaic/docs/modes/snapshot-file"},{"title":"Snapshot AWS/S3 mode","content":["In "," mode a snapshot can be loaded from a pre-configured AWS S3 bucket.","To use "," mode","> export MOSAIC_MODE=\"snapshot-s3\"\n> MOSAIC_S3_BUCKET=\"<your S3 bucket id>\"\n> MOSAIC_S3_REGION=\"<your S3 region>\"\n> MOSAIC_S3_ACCESS_KEY_ID=\"<your S3 access key>\"\n> MOSAIC_S3_SECRET_ACCESS_KEY=\"<your S3 secret access key>\"","Generating snapshot","To generate a snapshot, run","yarn gen:snapshot","Uploading a snapshot to S3","To upload a snapshot to S3, define the required environment variables and run","yarn mosaic upload -S <path to snapshot file>"],"route":"/mosaic/docs/modes/snapshot-s3"}]